# ğŸš€ SpringBoot Init Master - æé€Ÿæ„å»ºä¼ä¸šçº§Javaåº”ç”¨

> ä½œè€…ï¼šhgh

åŸºäº Java SpringBoot çš„é¡¹ç›®åˆå§‹æ¨¡æ¿ï¼Œæ•´åˆäº†å¸¸ç”¨æ¡†æ¶å’Œä¸»æµä¸šåŠ¡çš„ç¤ºä¾‹ä»£ç ã€‚

åªéœ€ 1 åˆ†é’Ÿå³å¯å®Œæˆå†…å®¹ç½‘ç«™çš„åç«¯ï¼ï¼ï¼å¤§å®¶è¿˜å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå¿«é€Ÿå¼€å‘è‡ªå·±çš„é¡¹ç›®ã€‚

## æ¨¡æ¿ç‰¹ç‚¹

### ä¸»æµæ¡†æ¶ & ç‰¹æ€§

- Spring Boot 2.7.x
- Spring MVC
- MyBatis + MyBatis Plus æ•°æ®è®¿é—®ï¼ˆå¼€å¯åˆ†é¡µï¼‰
- Spring Boot è°ƒè¯•å·¥å…·å’Œé¡¹ç›®å¤„ç†å™¨
- Spring AOP åˆ‡é¢ç¼–ç¨‹
- Spring Scheduler å®šæ—¶ä»»åŠ¡
- Spring äº‹åŠ¡æ³¨è§£

### æ•°æ®å­˜å‚¨

- MySQL æ•°æ®åº“
- Redis å†…å­˜æ•°æ®åº“
- Elasticsearch æœç´¢å¼•æ“
- è…¾è®¯äº‘ COS å¯¹è±¡å­˜å‚¨

### å·¥å…·ç±»

- Easy Excel è¡¨æ ¼å¤„ç†
- Hutool å·¥å…·åº“
- Apache Commons Lang3 å·¥å…·ç±»
- Lombok æ³¨è§£

### ä¸šåŠ¡ç‰¹æ€§

- ä¸šåŠ¡ä»£ç ç”Ÿæˆå™¨ï¼ˆæ”¯æŒè‡ªåŠ¨ç”Ÿæˆ Serviceã€Controllerã€æ•°æ®æ¨¡å‹ä»£ç ï¼‰
- Spring Session Redis åˆ†å¸ƒå¼ç™»å½•
- å…¨å±€è¯·æ±‚å“åº”æ‹¦æˆªå™¨ï¼ˆè®°å½•æ—¥å¿—ï¼‰
- å…¨å±€å¼‚å¸¸å¤„ç†å™¨
- è‡ªå®šä¹‰é”™è¯¯ç 
- å°è£…é€šç”¨å“åº”ç±»
- Swagger + Knife4j æ¥å£æ–‡æ¡£
- è‡ªå®šä¹‰æƒé™æ³¨è§£ + å…¨å±€æ ¡éªŒ
- å…¨å±€è·¨åŸŸå¤„ç†
- é•¿æ•´æ•°ä¸¢å¤±ç²¾åº¦è§£å†³
- å¤šç¯å¢ƒé…ç½®

## ä¸šåŠ¡åŠŸèƒ½

- æä¾›ç¤ºä¾‹ SQLï¼ˆç”¨æˆ·ã€å¸–å­ã€å¸–å­ç‚¹èµã€å¸–å­æ”¶è—è¡¨ï¼‰
- ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æ³¨é”€ã€æ›´æ–°ã€æ£€ç´¢ã€æƒé™ç®¡ç†
- å¸–å­åˆ›å»ºã€åˆ é™¤ã€ç¼–è¾‘ã€æ›´æ–°ã€æ•°æ®åº“æ£€ç´¢ã€ES çµæ´»æ£€ç´¢
- å¸–å­ç‚¹èµã€å–æ¶ˆç‚¹èµ
- å¸–å­æ”¶è—ã€å–æ¶ˆæ”¶è—ã€æ£€ç´¢å·²æ”¶è—å¸–å­
- å¸–å­å…¨é‡åŒæ­¥ ESã€å¢é‡åŒæ­¥ ES å®šæ—¶ä»»åŠ¡
- æ”¯æŒå¾®ä¿¡å¼€æ”¾å¹³å°ç™»å½•
- æ”¯æŒå¾®ä¿¡å…¬ä¼—å·è®¢é˜…ã€æ”¶å‘æ¶ˆæ¯ã€è®¾ç½®èœå•
- æ”¯æŒåˆ†ä¸šåŠ¡çš„æ–‡ä»¶ä¸Šä¼ 

### å•å…ƒæµ‹è¯•

- JUnit5 å•å…ƒæµ‹è¯•
- ç¤ºä¾‹å•å…ƒæµ‹è¯•ç±»

### æ¶æ„è®¾è®¡

- åˆç†åˆ†å±‚
  src/main/java
  â”œâ”€â”€ common # é€šç”¨æ¨¡å—
  â”‚ â”œâ”€â”€ config # é…ç½®ç±»
  â”‚ â”œâ”€â”€ exception # å¼‚å¸¸å¤„ç†
  â”‚ â””â”€â”€ utils # å·¥å…·ç±»
  â”œâ”€â”€ controller # Web å±‚
  â”œâ”€â”€ service # ä¸šåŠ¡å±‚
  â”œâ”€â”€ mapper # æ•°æ®è®¿é—®å±‚
  â”œâ”€â”€ model # æ•°æ®æ¨¡å‹
  â”œâ”€â”€ job # å®šæ—¶ä»»åŠ¡
  â””â”€â”€ aop # åˆ‡é¢ç¼–ç¨‹

## å¿«é€Ÿä¸Šæ‰‹

> æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„åœ°æ–¹éƒ½æ ‡è®°äº† `todo`ï¼Œä¾¿äºæ‰¾åˆ°ä¿®æ”¹çš„ä½ç½®~

### MySQL æ•°æ®åº“

1ï¼‰ä¿®æ”¹ `application.yml` çš„æ•°æ®åº“é…ç½®ä¸ºä½ è‡ªå·±çš„ï¼š

```yml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/my_db
    username: root
    password: 123456
```

2ï¼‰æ‰§è¡Œ `sql/create_table.sql` ä¸­çš„æ•°æ®åº“è¯­å¥ï¼Œè‡ªåŠ¨åˆ›å»ºåº“è¡¨

3ï¼‰å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—® `http://localhost:8101/api/doc.html` å³å¯æ‰“å¼€æ¥å£æ–‡æ¡£ï¼Œä¸éœ€è¦å†™å‰ç«¯å°±èƒ½åœ¨çº¿è°ƒè¯•æ¥å£äº†~

![](doc/swagger.png)

### Redis åˆ†å¸ƒå¼ç™»å½•

1ï¼‰ä¿®æ”¹ `application.yml` çš„ Redis é…ç½®ä¸ºä½ è‡ªå·±çš„ï¼š

```yml
spring:
  redis:
    database: 1
    host: localhost
    port: 6379
    timeout: 5000
    password: 123456
```

2ï¼‰ä¿®æ”¹ `application.yml` ä¸­çš„ session å­˜å‚¨æ–¹å¼ï¼š

```yml
spring:
  session:
    store-type: redis
```

3ï¼‰ç§»é™¤ `MainApplication` ç±»å¼€å¤´ `@SpringBootApplication` æ³¨è§£å†…çš„ exclude å‚æ•°ï¼š

ä¿®æ”¹å‰ï¼š

```java
@SpringBootApplication(exclude = {RedisAutoConfiguration.class})
```

ä¿®æ”¹åï¼š

```java
@SpringBootApplication
```

### Elasticsearch æœç´¢å¼•æ“

1ï¼‰ä¿®æ”¹ `application.yml` çš„ Elasticsearch é…ç½®ä¸ºä½ è‡ªå·±çš„ï¼š

```yml
spring:
  elasticsearch:
    uris: http://localhost:9200
    username: root
    password: 123456
```

2ï¼‰å¤åˆ¶ `sql/post_es_mapping.json` æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œé€šè¿‡è°ƒç”¨ Elasticsearch çš„æ¥å£æˆ–è€… Kibana Dev Tools æ¥åˆ›å»ºç´¢å¼•ï¼ˆç›¸å½“äºæ•°æ®åº“å»ºè¡¨ï¼‰

```
PUT post_v1
{
 å‚æ•°è§ sql/post_es_mapping.json æ–‡ä»¶
}
```

è¿™æ­¥ä¸ä¼šæ“ä½œçš„è¯éœ€è¦è¡¥å……ä¸‹ Elasticsearch çš„çŸ¥è¯†ï¼Œæˆ–è€…è‡ªè¡Œç™¾åº¦ä¸€ä¸‹~

3ï¼‰å¼€å¯åŒæ­¥ä»»åŠ¡ï¼Œå°†æ•°æ®åº“çš„å¸–å­åŒæ­¥åˆ° Elasticsearch

æ‰¾åˆ° job ç›®å½•ä¸‹çš„ `FullSyncPostToEs` å’Œ `IncSyncPostToEs` æ–‡ä»¶ï¼Œå–æ¶ˆæ‰ `@Component` æ³¨è§£çš„æ³¨é‡Šï¼Œå†æ¬¡æ‰§è¡Œç¨‹åºå³å¯è§¦å‘åŒæ­¥ï¼š

```java
// todo å–æ¶ˆæ³¨é‡Šå¼€å¯ä»»åŠ¡
//@Component
```

### ä¸šåŠ¡ä»£ç ç”Ÿæˆå™¨

æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ Serviceã€Controllerã€æ•°æ®æ¨¡å‹ä»£ç ï¼Œé…åˆ MyBatisX æ’ä»¶ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘å¢åˆ æ”¹æŸ¥ç­‰å®ç”¨åŸºç¡€åŠŸèƒ½ã€‚

æ‰¾åˆ° `generate.CodeGenerator` ç±»ï¼Œä¿®æ”¹ç”Ÿæˆå‚æ•°å’Œç”Ÿæˆè·¯å¾„ï¼Œå¹¶ä¸”æ”¯æŒæ³¨é‡Šæ‰ä¸éœ€è¦çš„ç”Ÿæˆé€»è¾‘ï¼Œç„¶åè¿è¡Œå³å¯ã€‚

```
// æŒ‡å®šç”Ÿæˆå‚æ•°
String packageName = "com.hgh.springbootinit";
String dataName = "ç”¨æˆ·è¯„è®º";
String dataKey = "userComment";
String upperDataKey = "UserComment";
```

ç”Ÿæˆä»£ç åï¼Œå¯ä»¥ç§»åŠ¨åˆ°å®é™…é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”æŒ‰ç…§ `// todo` æ³¨é‡Šçš„æç¤ºæ¥é’ˆå¯¹è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œä¿®æ”¹ã€‚
